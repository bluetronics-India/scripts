#!/usr/bin/env python3

# Require:
# apt-get install python3-passlib

from getpass import getpass
import sys, base64, time
from passlib.utils.pbkdf2 import pbkdf2

master_password = getpass();

thehash = pbkdf2(
  (master_password + "/" + sys.argv[1]).encode('utf-8'),
  b'',
  100000,
  keylen = 16
)

out_password = base64.b64encode(thehash)[0:12].decode('utf-8') + "$1Aa"

print(out_password)

